/*! -0.0.1 03-02-2015 */
function test(a,b,c){Test=function(a,b,c){return this.desc=a,this.a=b,this.b=c,this.assert=function(a,b){return a=a||this.a,b=b||this.b,_test=a===b,test.tests.push([a,b],_test),t=_test===!0?"Success":"Fail   ",this.printOut(t,_test),_test},this.printOut=function(a){console.log(this.desc,a)},void 0!==this.a&&void 0!==this.b?this.assert():void 0},_test=void 0!==b?void 0!==c?new Test(a,b,c):new Test("",a,b):new Test(a)}!function(a){function b(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function c(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)};d.format=function(a,e){var f,g,h,i,j,k,l,m=1,n=a.length,o="",p=[];for(g=0;n>g;g++)if(o=b(a[g]),"string"===o)p.push(a[g]);else if("array"===o){if(i=a[g],i[2])for(f=e[m],h=0;h<i[2].length;h++){if(!f.hasOwnProperty(i[2][h]))throw d('[sprintf] property "%s" does not exist',i[2][h]);f=f[i[2][h]]}else f=i[1]?e[i[1]]:e[m++];if(/[^s]/.test(i[8])&&"number"!=b(f))throw d("[sprintf] expecting number but found %s",b(f));switch(i[8]){case"b":f=f.toString(2);break;case"c":f=String.fromCharCode(f);break;case"d":f=parseInt(f,10);break;case"e":f=i[7]?f.toExponential(i[7]):f.toExponential();break;case"f":f=i[7]?parseFloat(f).toFixed(i[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=String(f))&&i[7]?f.substring(0,i[7]):f;break;case"u":f>>>=0;break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}f=/[def]/.test(i[8])&&i[3]&&f>=0?"+"+f:f,k=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",l=i[6]-String(f).length,j=i[6]?c(k,l):"",p.push(i[5]?f+j:j+f)}return p.join("")},d.cache={},d.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw"[sprintf] huh?";for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d};var e=function(a,b,c){return c=b.slice(0),c.splice(0,0,a),d.apply(null,c)};a.sprintf=d,a.vsprintf=e}("undefined"!=typeof exports?exports:window);var IS=function(){return this._null=function(a){return null===a},this._undefined=function(a){return this._null(a)||"undefined"==typeof a||"undefined"===a},this._string=function(a){return(a instanceof String||"string"==typeof a)&&!this._undefined(a)&&!this._true(a)&&!this._false(a)},this._number=function(a){return(a instanceof Number||"number"==typeof a)&&!isNaN(a)},this._boolean=function(a){return a instanceof Boolean||"boolean"==typeof a||this._true(a)||this._false(a)},this._object=function(a){return(a instanceof Object||"object"==typeof a)&&!this._null(a)&&!this._jquery(a)&&!this._array(a)},this._array=function(a){return a instanceof Array},this._function=function(a){return a instanceof Function||"function"==typeof a},this._jquery=function(a){return"undefined"!=typeof jQuery&&a instanceof jQuery},this._true=function(a){return a===!0||"true"===a},this._false=function(a){return a===!1||"false"===a},this._percentage=function(a){return this._string(a)&&"%"==a.slice(-1)&&this._number(parseInt(a.slice(0,-1),10))},this}(),IT=function(){this._value=void 0;var a=function(a){return this.value(a)};return this.value=function(a){return void 0!==a?(this._value=a,this):this._value||this},this.data=function(a){return void 0===a?this._value:this},this.toString=function(){return this.data().toString()},a.apply(this,arguments)},it=function(a){if(void 0===a)return IT;var b=new IT(a);return b};test.tests=[],ItTestExt=function(a,b,c,d){var e=b.name||a,f=function(d){return sprintf(d,{name:a,type:b,value:c,tn:e})};console.log("+ Testing",e,typeof c,"against",c,"expecting",d),test(f("    it.%(name)s( %(tn)s , %(value)s )"),it.is(b,c),d),test(f("    IT.%(name)s( %(tn)s , %(value)s )"),IT.is(b,c),d),test(f("  it().%(name)s( %(tn)s , %(value)s )"),it().is(b,c),d),test(f("  (IT).%(name)s( %(tn)s , %(value)s )"),IT.is(b,c),d),test(f("  it(%(value)s).%(name)s( %(tn)s )"),it(c).is(b),d)},IT.implement=function(a,b){it[a]=function(){return b.apply(IT,arguments)},IT.prototype[a]=function(a,c){var d=this.value()||c;return b(a,d)},IT[a]=it[a]},IT.implement("is",function(a,b){if(void 0===b&&console.warn("IT.is type checking against an undefined value"),void 0===a&&void 0===b)return void 0;var c;return c=a.hasOwnProperty("name")?a.name.toLowerCase():String(a).toLowerCase(),IS.hasOwnProperty("_"+c)?IS["_"+c](b):!1}),IT.implement("has",function(a,b){var c=it(b);return c.is(Object)?b.hasOwnProperty(a):c.is(Array)||c.is(String)?b.indexOf(a)>-1:void 0}),function(a,b){var c=function(b){(a.execScript||function(b){a.eval.call(a,b)})(b)},d=function(a,b){return a instanceof(b||Array)},e=document,f="getElementsByTagName",g="length",h="readyState",i="onreadystatechange",j=e[f]("script"),k=j[j[g]-1],l=k.innerHTML.replace(/^\s+|\s+$/g,"");if(!a.ljs){var m=k.src.match(/checkLoaded/)?1:0,n=e[f]("head")[0]||e.documentElement,o=function(a){var b={};return b.u=a.replace(/#(=)?([^#]*)?/g,function(a,c,d){return b[c?"f":"i"]=d,""}),b},p=function(a,b,c){var d,f=e.createElement(a);c&&(f[h]?f[i]=function(){("loaded"===f[h]||"complete"===f[h])&&(f[i]=null,c())}:f.onload=c);for(d in b)b[d]&&(f[d]=b[d]);n.appendChild(f)},q=function(a,b){if(this.aliases&&this.aliases[a]){var c=this.aliases[a].slice(0);return d(c)||(c=[c]),b&&c.push(b),this.load.apply(this,c)}if(d(a)){for(var e=a[g];e--;)this.load(a[e]);return b&&a.push(b),this.load.apply(this,a)}return a.match(/\.css\b/)?this.loadcss(a,b):this.loadjs(a,b)},r={},s={aliases:{},loadjs:function(a,c){var d=o(a);return a=d.u,r[a]===!0?(c&&c(),this):r[a]!==b?(c&&(r[a]=function(a,b){return function(){a&&a(),b&&b()}}(r[a],c)),this):(r[a]=function(b){return function(){r[a]=!0,b&&b()}}(c),c=function(){r[a]()},p("script",{type:"text/javascript",src:a,id:d.i,onerror:function(a){if(d.f){var b=a.currentTarget;b.parentNode.removeChild(b),p("script",{type:"text/javascript",src:d.f,id:d.i},c)}}},c),this)},loadcss:function(a,b){var c=o(a);return a=c.u,r[a]||p("link",{type:"text/css",rel:"stylesheet",href:a,id:c.i}),r[a]=!0,b&&b(),this},load:function(){var a=arguments,c=a[g];return 1===c&&d(a[0],Function)?(a[0](),this):(q.call(this,a[0],1>=c?b:function(){s.load.apply(s,[].slice.call(a,1))}),this)},addAliases:function(a){for(var b in a)this.aliases[b]=d(a[b])?a[b].slice(0):a[b];return this}};if(m){var t,u,v,w;for(t=0,u=j[g];u>t;t++)(w=j[t].getAttribute("src"))&&(r[w.replace(/#.*$/,"")]=!0);for(v=e[f]("link"),t=0,u=v[g];u>t;t++)("stylesheet"===v[t].rel||"text/css"===v[t].type)&&(r[v[t].getAttribute("href").replace(/#.*$/,"")]=!0)}a.ljs=s}l&&c(l)}(window),function(a,b){"use-strict";var d=document.getElementsByTagName("script"),e=d[d.length-1],f=b,g={built:!1},h={},i={};h.sprintf=function(){var b=a.sprintf||window.sprintf;return b}(),h.it=function(){var b=a.it||window.it;return b}(),h.addEvent=function(b,c){var d=f.parent||a,e=d.addEventListener?d.addEventListener:d.attachEvent,g=[];it(b).is("array")||(b=[b]);for(var h=b.length-1;h>=0;h--){var i=b[h];g.push(e(i,c,!0,!0))}return g},h.dispatchEvent=function(b,c){var d,e=b;it(b).is("array")||(e=[b]);for(var f=e.length-1;f>=0;f--){var g=e[f];try{d=new CustomEvent(g,c),a.dispatchEvent(d)}catch(h){}}},h.removeEvent=function(b,c){var d=f.parent||a;c=c||h.eventReceiver,d.removeEventListener(b,c,!0,!0)},h.randomString=function(){return Number(String(Math.random()).replace(".",+new Date)).toString(36)},h.dispatchFrameworkEvent=function(a,b){var c=f.namespace+":"+a,d="*:"+a;b=b||{},b[f.namespace]=g,b.namespace=f.namespace,h.addEvent([c,d],h.eventReceiver),h.dispatchEvent([c,d],{detail:b})},h.listenOn=function(a,b){var c=f.namespace+":"+a;return h.addEvent(c,b)},h.readyHook=function(b){if(b.readyhook||null!==b.readyhook){var c=typeof b.readyhook;if("string"==c){if(hook=a[b.readyhook],void 0===hook)throw new Error("readyhook '"+b.readyhook+"' is not defined within the accessible namespace")}else"function"==c&&(hook=b.readyhook)}return hook},h.init=function(c,d){void 0===d&&(d=c,c=a),c=c||a;var e=h.extend({},b,d||{});return console.log("Spin "+e.namespace),f=g.getConfig(e),g.inited=!0,f.build&&!g.building&&(h.build(c,e),h.execute()),g},h.build=function(a,b){if(g.building&&!g.built)return!0;g.building=!0,g.inited||h.init();var c=h.extend(f,b);return c.parent=null===c.parent||void 0===c.parent?a:c.parent,c.parent[c.namespace]=g,g.namespace=c.namespace,g.built=!0,g},h.execute=function(b){g.built||h.build(g.parent||a,b);h.extend(f,b);if(!g.built)throw new Error(g.namespace+" cannot build.");g.building=!1,h.dispatchFrameworkEvent("ready"),f.cleanup&&(h.listenOn("cleanup",h.cleanup),h.dispatchFrameworkEvent("cleanup"))},h.waitOnExecute=function(a){var b,c,d,e=h.extend(f,a),i=e.waitOn||{},j=this,k=function(){h.shouldExecute()&&g.execute(e),console.log("waitOn execution took place",b);g[b].apply(j,arguments);g[b]=d};for(b in i)i.hasOwnProperty(b)&&(c=i[b],d=g[b],console.log("wait on",c,g),g[b]=k)},h.eventReceiver=function(a){h.removeEvent(a.type,h.eventReceiver)},h.finalExecution=function(a){a=a||f;var b=function(a){return a},c={chain:h.nextExecution};h.dispatchFrameworkEvent("chain",c),b=h.readyHook(a);var d=b(g,a);return d},h.shouldExecute=function(a){return a=a||f,a.build===!0&&1!=g.building&&g.built===!1},h.chainScope=function(a){var b={};return void 0===g[a]?g[a]=b:h.extend(g[a],b),b},h.nextExecution=function(a,b,c){if(void 0===b){var d=g.getConfig(),e=h.finalExecution();"object"==typeof e&&(d=d.extend(d,e)),h.shouldExecute()&&0==f.waitOn.length&&(console.log("Auto execute."),g.execute())}else h.rootImplement(a,b,c);return h.nextExecution},h.rootImplement=function(a,b,c){void 0!==c&&(f=h.extend(f,c));var d=new h.chainScope(a,b,c);h.dispatchFrameworkEvent("implementing",a);var e=b.call(d,g,h.nextExecution,f,d);return h.dispatchFrameworkEvent("implemented",a),e},h.clone=function(a){if(null==a||"object"!=typeof a)return a;if(a instanceof Date){var b=new Date;return b.setTime(a.getTime()),b}if(a instanceof Array){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=h.clone(a[c]);return b}if(a instanceof Object){var b={};for(var e in a)a.hasOwnProperty(e)&&(b[e]=h.clone(a[e]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")},h.extend=function(){var a=function(a,b,c){if("waitOn"==c){var d=b[c];h.it(b[c]).is("array")||(d=[b[c]]),a[c]=a[c]||[];var e,f;for(e=0;e<d.length;e++)f=d[e],-1==a[c].indexOf(f)&&a[c].push(f)}else a[c]=b[c]},b=Array.prototype.slice.call(arguments,0);return h.noder(a,b)},h.noder=function(a,b){a=a||function(a,b,c){return a[c]=b[c]},Array.prototype.forEach||(Array.prototype.forEach=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments.length>=2?arguments[1]:void 0,e=0;c>e;e++)e in b&&a.call(d,b[e],e,b)});var c=b[0];return Array.prototype.slice.call(b,1).forEach(function(b){if(b)for(var d in b)b[d]&&b[d].constructor&&b[d].constructor===Object?c[d]&&c[d].constructor!==Object?a(c,b,d):(c[d]=c[d]||{},h.extend(c[d],b[d],a)):a(c,b,d)}),c},h.makeup=function(a,b,c){var a=a||g,d=h.extend({},h.originalConfiguration,b),c=c||h;return a=function(a,b){return a.init=c.init,a.inited=c.inited,a.build=c.build,a.building=c.building,a.built=c.built,a.execute=c.execute,a.waitOnExecute=c.waitOnExecute,a._conf=b,a}.apply({},[a,d,c])},h.cleanup=function(a){var b=f.namespace,c=a.detail[b];delete c.init,delete c.inited,delete c.building,delete c.build,delete c.execute,delete c.waitOnExecute},g.getUtil=function(){return h},g.getConfig=function(a){c=void 0===a?{}:"string"==typeof a?{}:a;var b,d,g=h.extend({},f,h.clone(c));for(b in e.dataset)d=e.dataset[b],"false"==d?d=!1:"true"==d?d=!0:"undefined"==d?d=void 0:"null"==d?d=null:("{}"==d||"object"==d.toLowerCase())&&(d={}),g[b]=d;return void 0===a?g:"string"==typeof a?g[a]:g},g.setConfig=function(a,b){return 2==arguments.length?f[a]=b:1==arguments.length&&it(a).is("object")&&(f=h.extend(f,a)),g.getConfig()};var j;return g.ready=function(a){return g.built===!0?a(g):(j||(h.addEvent("*:ready",function(){for(var a=j.length-1;a>=0;a--){var b=j[a];b(g)}}),j=[]),void j.push(a))},i.readyReactions=function(){var a=g.getConfig(),b=a.namespace.toLowerCase();h.addEvent(b+":get",function(a){a.detail&&a.detail.name?(void 0!==a.detail.space&&(a.detail.space===!0?g[a.detail.name]={name:a.detail.name}:g[a.detail.space]={name:a.detail.name}),i.dispatchEvent(b+":"+a.detail.name)):i.dispatchEvent(b)})},i.getScript=function(){return e},i.dispatchEvent=function(a,b){h.dispatchEvent(a,{detail:h.extend({namespace:g,spindle:i,utils:h},b||{})})},h.makeup(),i.readyReactions(),h.nextExecution}(this,{namespace:"Spindle",build:!0,parent:null,waitOn:["init"],cleanup:!0,readyhook:function(a){console.log("readyhook",a),window.Sp=a,a.getConfig("build")&&a.waitOnExecute()}})("events",function(a){function b(a){var b,c,d,e={},f=Array;a=a||this,a.on=function(a,b,c){e[a]||(e[a]=[]),e[a].push({f:b,c:c})},a.off=function(a,d){for(c=e[a]||[],b=c.length=d?c.length:0;~--b<0;)d==c[b].f&&c.splice(b,1)},a.emit=function(){for(d=f.apply([],arguments),c=e[d.shift()]||[],b=c.length,j=0;j<b;j++)c[j].f.apply(c[j].c,d)}}CoreEvents=function(){var a=function(a){return this._scope=a||{},b||this.error(2,"Events missing. Import minivents.js"),b(this._scope),this};return this.error=function(a,b){return console.error("Error:",a,b),this.dispatch("error",{type:"error",code:a,message:b})},this.warn=function(a,b){return void 0===b&&(b=a,a=-1),console.warn("Warning:",a,b),this.dispatch("error",{type:"error",code:a,message:b})},this.on=function(a,b){return this._scope.on(a,b)},this.dispatch=function(a,b){return this._scope.emit(a,b)},this.off=function(a){return this._scope.off(a)},this.add=function(a,b){return new this.register(a,b)},a.apply(this,arguments)},a.events=new CoreEvents;var c=function(b){var c,d=b,e=this;name=arguments[1]||d.name,b=function(){return c=d.apply(e,arguments),console.log("call",name),a.events.dispatch(name,arguments),c}};c(a.getConfig),c(a.init),c(a.build),c(a.execute)})(),function(a){"use strict";var b,c,d,e,f=window.addEventListener?window.addEventListener:window.attachEvent,g=function(){f("spindle:"+a.name,function(f){b=f.detail.namespace,c=f.detail.spindle,d=f.detail.utls,e=b[a.space],i()}),h()},h=function(){window.dispatchEvent(new CustomEvent("spindle:get",{detail:{name:a.name,space:a.space}}))},i=function(){b.path=k.path,e.load=function(){return ljs.load.apply(ljs,arguments)},e.aliasLoad=function(){return ljs.load.apply(ljs,arguments)},e.relativeLoad=function(a,c,d){var f,g=a;0==it(a).is("string")&&a.src!==!1&&(g=a.src);var h=it(c),i=b.path.dirname(g);if(h.is("string")){var j=b.path.join([i,c]);f=j}if(h.is("array")){for(var k=c.length-1;k>=0;k--)c[k]=b.path.join(i,c[k]);f=c}return e.load(f,d)},b.ready(j)},j=function(){},k={path:{}};k.path.baseName=function(a){var b=a.lastIndexOf("/")+1;return a.slice(b)},k.path.basename=k.path.baseName,k.path.dirname=function(a){var b=a.lastIndexOf("/")+1,c=a.slice(0,b);return/^\/+$/.test(c)||(c=c.replace(/\/+$/,"")),c},k.path.extension=function(a){var b=".",c=k.path.baseName(a).replace(/\.+/g,b),d=c.lastIndexOf(b);return 0>=d?"":c.substr(d+1)},k.path.join=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b];k.path.startsWith(c,"/")?a=c:a+=""==a||k.path.endsWith(a,"/")?c:"/"+c}return a},k.path.endsWith=function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)==c},k.path.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)},k.path.normalizePath=function(a){if(""==a)return".";var b="";k.path.startsWith(a,"/")&&(b="/",k.path.startsWith(a,"//")&&!k.path.startsWith(a,"///")&&(b="//"));for(var c=a.split("/"),d=[],e=0;e<c.length;e++){var f=c[e];""!=f&&"."!=f&&(".."!=f||!b&&!d.length||".."==goog.array.peek(d)?d.push(f):d.pop())}var g=b+d.join("/");return g||"."},k.path.split=function(a){var b=k.path.dirname(a),c=k.path.baseName(a);return[b,c]},g()}.call(window,{name:"plugin",space:"load"}),function(a){"use strict";var b,c,d,e=document.getElementsByTagName("script"),f=e[e.length-1],g=window.addEventListener?window.addEventListener:window.attachEvent,h=["components/cotton.canvas.js"],i=function(){g("spindle:"+a.name,function(a){b=a.detail.namespace,c=a.detail.spindle,d=a.detail.utils,j()});var e=new CustomEvent("spindle:get",{detail:{name:a.name}});window.dispatchEvent(e)},j=function(){k(),b.setConfig(a),b.ready(l),b.init()},k=function(){b.load.relativeLoad(f,h,function(){console.log("live loaded")})},l=function(){console.log("Cotton",a.name)};i()}.call(window,{name:"cotton",namespace:"cotton"}),function(a){"use strict";{var b,c,d,e,f=window.addEventListener?window.addEventListener:window.attachEvent,g=document.getElementsByTagName("script"),h=(g[g.length-1],this),i=function(){b.draw=k,e.draw=k,e.create=l,e.inspectCanvas=m,e.getCanvas=n,e.animFrame=o,console.log("Setup",a.name)},j=function(){console.log("Ready",a.name)},k=function(a,b){var c=l(a,b);return c.animFrame.loop(),c},l=function(a,b){var c=m(a);return c.animFrame=o(b),c},m=function(a){var b=n(a),c=window.devicePixelRatio||1,d={context:void 0,canvas:b,width:0,height:0,devicePixelRatio:c};return d.context=b.getContext("2d"),d.context.scale(c,c),d.width=b.width*c,d.height=b.height*c,d},n=function(a){if(void 0===a){var b=document.getElementsByTagName("canvas");1==b.length&&(a=b[0])}else{var c;if(it(a).is("string"))c=a,a=document.getElementById(c);else if(!(a instanceof HTMLElement))return!1}if(a instanceof HTMLElement!=1)throw new Error("Canvas:"+a+" must be HTML element");return a},o=function(b){var c=function(){},d=!0,e={loop:void 0,render:void 0,run:d,start:void 0,stop:void 0};e.render=function(a){return a&&(c=a),c};var f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,a.fps)}}();return e.loop=function(){e.createTime=+new Date;var a=function(){!function a(){c(),e.run&&f(a)}()};a()},e.start=function(){e.run=!0,e.loop()},e.stop=function(){e.run=!1},e.running=function(){return e.run},void 0!==b&&(c=b),e};(function(){f("spindle:"+a.name,function(f){b=f.detail.namespace,c=f.detail.spindle,d=f.detail.utils,e=b[a.name],h.core=b,h.spindle=c,h.utils=d,i(),b.ready(j)}),window.dispatchEvent(new CustomEvent("spindle:get",{detail:{name:a.name,space:!0}}))}).call(this)}}.call(window,{name:"canvas"});